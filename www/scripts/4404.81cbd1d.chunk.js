(self.webpackChunkasf_ui=self.webpackChunkasf_ui||[]).push([[4404],{1635:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(144),n=s(9695),r=s.n(n);function i(){const e=r().getSupportedLanguages(),{locale:t,noRegionalLocale:s}=a.default.i18n;switch(t){case"zh-CN":return"zh_CN";case"zh-TW":case"zh-HK":return"zh_TW";default:return e.includes(s)?s:"en"}}},423:(e,t,s)=>{var a=s(8081),n=s(3645)(a);n.push([e.id,".releases{word-break:break-word}.release{border-bottom:1px solid var(--color-background);margin-bottom:1em;padding-bottom:1em}.release:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}.release__title{align-items:center;display:flex;margin-top:0}@media screen and (max-width: 400px){.release__title{align-items:flex-start;flex-direction:column;gap:4px}}.release__version{font-size:1.3em;font-weight:bold}.release__time{margin-left:auto}@media screen and (max-width: 400px){.release__time{margin-left:0}}.release__badge{background-color:var(--color-background-light);border:2px solid currentColor;border-radius:4px;display:inline-block;line-height:1;margin-left:.5em;padding:.25em .5em;text-align:center;vertical-align:baseline}@media screen and (max-width: 400px){.release__badge{margin-left:0}}.release__badge--prerelease{color:#a92616}.release__badge--stable{color:#00a65a}.release__badge--install{color:var(--color-text-info);cursor:pointer}.release__changelog-link{color:var(--color-theme);font-weight:600;text-decoration:none}.release__changes{font-family:monospace,monospace}.release__changes a{color:var(--color-theme);text-decoration:none}@media screen and (max-width: 450px){.release__changes ul{margin-inline-end:.2em;margin-inline-start:.2em;padding-inline-start:1.2em}}.release__changes details{margin-bottom:1em}.release__changes summary{cursor:pointer}",""]),e.exports=n},4404:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>_});var a=function(){var e=this._self._c;return e("main",{staticClass:"main-container main-container--fullheight"},[e("div",{staticClass:"container"},[e("AsfReleases")],1)])};a._withStripped=!0;var n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"releases"},[e.loading&&!e.statusText?t("h3",{staticClass:"subtitle"},[t("FontAwesomeIcon",{attrs:{icon:"spinner",size:"lg",spin:""}})],1):e._e(),e._v(" "),e.statusText?t("h3",{staticClass:"subtitle"},[e._v("\n    "+e._s(e.statusText)+"\n  ")]):e._l(e.releases,(function(s,a){return t("div",{key:a,staticClass:"release"},[t("div",{staticClass:"release__title"},[t("span",{staticClass:"release__version"},[e._v("v"+e._s(s.version))]),e._v(" "),t("span",{staticClass:"release__badge",class:[s.stable?"release__badge--stable":"release__badge--prerelease"]},[e._v(e._s(s.stable?e.$t("stable"):e.$t("pre-release")))]),e._v(" "),e.updatesEnabled&&e.canUpdate&&e.isLatestForUpdateChannel(a)&&e.isNewer(s.version)?t("span",{staticClass:"release__badge release__badge--install",on:{click:e.update}},[e._v(e._s(e.$t("releases-install")))]):e._e(),e._v(" "),t("span",{staticClass:"release__time"},[e._v(e._s(e.getTimeText(s.publishedAt)))])]),e._v(" "),t("div",{staticClass:"release__changes",domProps:{innerHTML:e._s(s.changelog)}}),e._v(" "),t("a",{staticClass:"release__changelog-link",attrs:{target:"_blank",rel:"noreferrer noopener",href:`https://github.com/JustArchiNET/ArchiSteamFarm/releases/tag/${s.version}`}},[e._v(e._s(e.$t("changelog-full")))])])}))],2)};n._withStripped=!0;var r=s(629),i=s(9695),l=s.n(i),o=s(5334),c=s(1635),h=s(795),d=s(1438);const u={name:"AsfReleases",data:()=>({loading:!0,error:null,releases:[],releaseCount:5,updating:!1}),computed:{...(0,r.Se)({version:"asf/version",updateChannel:"asf/updateChannel",updatesEnabled:"asf/updatesEnabled",canUpdate:"asf/canUpdate"}),statusText(){return this.error?this.error:this.loading||this.releases.length?void 0:this.$t("releases-not-found")}},async created(){try{this.releases=await this.loadReleases(),this.loading=!1}catch(e){this.error=e.message}},methods:{getTimeText(e){const t=(0,c.Z)(),s=new Date-new Date(e),a=l()(s,{language:t,largest:2,maxDecimalPoints:0,conjunction:this.$t("released-ago-conjunction")});return this.$t("released-ago",{time:a})},isLatestForUpdateChannel(e){return this.updateChannel===d.UPDATECHANNEL.EXPERIMENTAL&&0===e||this.updateChannel===d.UPDATECHANNEL.STABLE&&1===e},isNewer(e){return e>this.version},async update(){if(!this.updating){this.updating=!0,this.$snotify.info(this.$t("update-trying"),this.$t("info")).on("click",(e=>this.$router.push({name:"log"})));try{await this.$http.post("asf/update",{}),this.$router.push({name:"setup",params:{update:!0}})}catch(e){if(!e.result&&!e.message.includes("â‰¥"))throw e;const{remoteVersion:t,localVersion:s}=this.extractVersions(e);s===t?this.$info(this.$t("update-is-up-to-date")):this.$info(this.$t("update-is-newest"))}finally{this.updating=!1}}},async loadReleases(){const e=h.U2("cache:releases");if(e){const{timestamp:t,releases:s,version:a}=e,n=Date.now()-36e5;let r=!0;if(s.forEach((e=>{const t=e.changelog;t&&t.startsWith("<p>Changes since")||(r=!1)})),a===this.version&&t>n&&r)return s}const t=await this.fetchReleases();return h.t8("cache:releases",{timestamp:Date.now(),releases:t,version:this.version}),t},async fetchReleases(){const e=[];return e.push(await this.fetchRelease()),e[0]&&e[0].stable||e.push(await this.fetchRelease("latest")),!e.some((e=>e.version===this.version))&&this.version<=e[0].version&&e.push(await this.fetchRelease(this.version)),e.filter(((t,s)=>!!t&&e.findIndex((e=>e.version===t.version))===s)).sort(((e,t)=>function(e,t){const s=e.split(".").map((e=>parseInt(e,10))),a=t.split(".").map((e=>parseInt(e,10))),n=Math.max(s.length,a.length);for(let e=0;e<n;++e){const t=s[e]||0,n=a[e]||0;if(t!==n)return t>n?1:-1}return 0}(t.version,e.version)))},async fetchRelease(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{const t=await this.$http.get(`www/github/release/${e}`),s=new Date(t.ReleasedAt),a={ignoreTags:["code"]};let n=(0,o.Z)(t.ChangelogHTML,a).replace(/<a href="/g,'<a target="_blank" rel="noreferrer noopener" href="');return n||(n=this.$t("releases-changelog")),{changelog:n,stable:t.Stable,version:t.Version,publishedAt:s}}catch(e){console.warn(e.message)}}}};s(7496);var g=s(1900);const p={name:"Releases",metaInfo(){return{title:this.$t("releases")}},components:{AsfReleases:(0,g.Z)(u,n,[],!1,null,null,null).exports}},_=(0,g.Z)(p,a,[],!1,null,null,null).exports},7496:(e,t,s)=>{var a=s(423);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,s(5346).Z)("b8c1f4b8",a,!1,{})}}]);